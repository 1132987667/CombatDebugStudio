## 战斗AI系统实现计划

### 阶段1：基础架构设计
1. **创建 BattleAI 接口和通用AI策略**
   - 定义 `BattleAI` 接口，包含决策方法
   - 实现 `CharacterAI`（我方）和 `EnemyAI`（敌方）
   - 支持能量管理、技能释放判断

2. **扩展 BattleParticipant**
   - 添加可用技能列表
   - 添加能量积累规则
   - 添加状态效果检测

### 阶段2：技能系统集成
3. **技能执行框架**
   - 定义技能类型（小技能、大招、被动）
   - 实现技能效果器（伤害、治疗、增益、减益）
   - 添加技能冷却和能量消耗机制

4. **技能AI决策逻辑**
   - 能量足够时优先放大招
   - 血量低时优先治疗
   - 根据场上形势选择技能目标
   - 满血时跳过治疗技能

### 阶段3：目标选择策略
5. **智能目标选择**
   - 优先攻击低血量目标
   - 优先攻击脆皮职业
   - 治疗者优先攻击己方残血
   - 集火策略

### 阶段4：状态检测与响应
6. **战场状态感知**
   - 检测己方血量状态
   - 检测敌方威胁等级
   - 检测是否需要防守或进攻
   - 检测控制效果（眩晕、沉默等）

### 实现细节
- 创建 `src/core/BattleAI.ts` 文件
- 修改 `BattleSystem.ts` 的 `processTurn()` 方法使用AI
- 添加能量自动积累逻辑
- 支持多种AI行为模式